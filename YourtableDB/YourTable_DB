DROP TABLE RESERVATION;
DROP TABLE RESTAURANT;
DROP TABLE CUSTOMER;
DROP TABLE RESTAURANTOwner;

ALTER SEQUENCE public.CUSTOMER_ID RESTART WITH 1;
ALTER SEQUENCE public.OWNER_ID RESTART WITH 1;


	CREATE SEQUENCE IF NOT EXISTS  public.CUSTOMER_ID
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

	CREATE SEQUENCE IF NOT EXISTS public.OWNER_ID
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

	CREATE SEQUENCE IF NOT EXISTS public.RESTAURANT_ID
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

CREATE EXTENSION IF NOT EXISTS citext;


CREATE TABLE CUSTOMER (
CUSTOMER_ID INT primary key NOT NULL DEFAULT NEXTVAL('public.CUSTOMER_ID'),
CUSTOMER_FIRSTNAME VARCHAR(30),
CUSTOMER_SECONDNAME VARCHAR(30),
CUSTOMER_EMAIL CITEXT,
CUSTOMER_USERNAME VARCHAR(80),
CUSTOMER_PASSWORD VARCHAR(80),
CUSTOMER_PHONE VARCHAR(20),
CUSTOMER_SALT INT NOT NULL
);

CREATE TABLE RESTAURANTOwner (
OWNER_ID INT primary key NOT NULL,
OWNER_FIRSTNAME VARCHAR(30),
OWNER_SECONDNAME VARCHAR(30),
OWNER_EMAIL CITEXT,
OWNER_USERNAME VARCHAR(80),
OWNER_PASSWORD VARCHAR(80),
OWNER_PHONE VARCHAR(20),
OWNER_SALT INT NOT NULL
);

CREATE TABLE RESTAURANT (
RESTAURANT_ID INT primary key NOT NULL,
OWNER_ID INT NOT NULL,
RESTAURANT_NAME VARCHAR(40),
RESTAURANT_LAYOUT INT [][],
CONSTRAINT FK_OWNER_ID FOREIGN key (OWNER_ID) references RESTAURANTOwner(OWNER_ID)
);

CREATE TABLE RESERVATION (
RESTAURANT_ID INT NOT NULL,
CUSTOMER_ID INT NOT NULL,
RESERVATION_TIME Time,
RESERVATION_DATE DATE,
PRIMARY KEY(RESTAURANT_ID,CUSTOMER_ID,RESERVATION_TIME,RESERVATION_DATE),
CONSTRAINT FK_CUSTOMER_ID FOREIGN key (CUSTOMER_ID) references CUSTOMER(CUSTOMER_ID),
CONSTRAINT FK_RESTAURANT_ID FOREIGN key (RESTAURANT_ID) references RESTAURANT(RESTAURANT_ID)
);



INSERT INTO CUSTOMER(CUSTOMER_FIRSTNAME,CUSTOMER_SECONDNAME,CUSTOMER_EMAIL,CUSTOMER_USERNAME,CUSTOMER_PASSWORD,CUSTOMER_PHONE,CUSTOMER_SALT)
VALUES ('Asik','Biho','testmass@gmail.com','mass2000','Passw0rd','+4367712333213',32131);
INSERT INTO CUSTOMER(CUSTOMER_FIRSTNAME,CUSTOMER_SECONDNAME,CUSTOMER_EMAIL,CUSTOMER_USERNAME,CUSTOMER_PASSWORD,CUSTOMER_PHONE,CUSTOMER_SALT)
VALUES ('Martin' ,'Mahmody','mahmodysecurity@lego.tr','mahmo00','MAhmoistStarK1','+4367700992112',32131);
INSERT INTO CUSTOMER(CUSTOMER_FIRSTNAME,CUSTOMER_SECONDNAME,CUSTOMER_EMAIL,CUSTOMER_USERNAME,CUSTOMER_PASSWORD,CUSTOMER_PHONE,CUSTOMER_SALT)
VALUES ('Sebastian', 'Dorner','Sebastian@dorner.at','bastian13','MyPasswordIsEasy','+436993213213',111);


INSERT INTO RESTAURANTOWNER(OWNER_ID,OWNER_FIRSTNAME,OWNER_SECONDNAME,OWNER_EMAIL,OWNER_USERNAME,OWNER_PASSWORD,OWNER_PHONE,OWNER_SALT)
VALUES (NEXTVAL('OWNER_ID'),'Fabio', 'Lupin','falupin@matrix.org','falupin','Ig0th4ck3dLOL!','+43671321321',1231);
INSERT INTO RESTAURANTOWNER(OWNER_ID,OWNER_FIRSTNAME,OWNER_SECONDNAME,OWNER_EMAIL,OWNER_USERNAME,OWNER_PASSWORD,OWNER_PHONE,OWNER_SALT)
VALUES (NEXTVAL('OWNER_ID'),'Herbert', 'Wolf','herbertw@test.ok','herbertwolf','IamH3rbert.','+436713265741',32131);
INSERT INTO RESTAURANTOWNER(OWNER_ID,OWNER_FIRSTNAME,OWNER_SECONDNAME,OWNER_EMAIL,OWNER_USERNAME,OWNER_PASSWORD,OWNER_PHONE,OWNER_SALT)
VALUES (NEXTVAL('OWNER_ID'),'Stefan', 'Kurz','stefikurz@samsung.at','stefankurz','st3fankURZ123!','+436713063531',3424242);
INSERT INTO RESTAURANTOWNER(OWNER_ID,OWNER_FIRSTNAME,OWNER_SECONDNAME,OWNER_EMAIL,OWNER_USERNAME,OWNER_PASSWORD,OWNER_PHONE,OWNER_SALT)
VALUES (NEXTVAL('OWNER_ID'),'Luka', 'Lang','lukal@liferando.at','LukaLang','123456789','+4367790913232',4234242);
INSERT INTO RESTAURANTOWNER(OWNER_ID,OWNER_FIRSTNAME,OWNER_SECONDNAME,OWNER_EMAIL,OWNER_USERNAME,OWNER_PASSWORD,OWNER_PHONE,OWNER_SALT)
VALUES (NEXTVAL('OWNER_ID'),'El', 'Aziz','elazizabidi@abidi.com','aziz123','admin123','+436991943212',423424);


INSERT INTO RESTAURANT(RESTAURANT_ID, OWNER_ID,RESTAURANT_NAME,RESTAURANT_LAYOUT)
VALUES (1, 1,'Burger Head','Default1');
INSERT INTO RESTAURANT(RESTAURANT_ID, OWNER_ID,RESTAURANT_NAME,RESTAURANT_LAYOUT)
VALUES (2, 2,'Burgerista','Default2');
INSERT INTO RESTAURANT(RESTAURANT_ID, OWNER_ID,RESTAURANT_NAME,RESTAURANT_LAYOUT)
VALUES (3, 3,'StefanPizza','Default3');

INSERT INTO RESERVATION(RESTAURANT_ID, CUSTOMER_ID,RESERVATION_TIME,RESERVATION_DATE)
VALUES (1, 1,'02:03:04','2021-09-27 ');

select * from restaurant;


select * from customer;
select * from restaurantowner;
